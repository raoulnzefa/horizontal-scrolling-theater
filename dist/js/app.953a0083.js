(function(t){function e(e){for(var o,a,i=e[0],l=e[1],u=e[2],d=0,p=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);s&&s(e);while(p.length)p.shift()();return c.push.apply(c,u||[]),r()}function r(){for(var t,e=0;e<c.length;e++){for(var r=c[e],o=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(o=!1)}o&&(c.splice(e--,1),t=a(a.s=r[0]))}return t}var o={},n={app:0},c=[];function a(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=o,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(r,o,function(e){return t[e]}.bind(null,o));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var s=l;c.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"02a3":function(t,e,r){"use strict";r("9622")},"3bb3":function(t,e,r){"use strict";r("d97a")},5074:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("7a23"),n=Object(o["f"])("h1",{class:"title"},"Vue.js Theater",-1),c={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a=Object(o["f"])("title",null,"Cart",-1),i=Object(o["f"])("circle",{cx:"176",cy:"416",r:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),l=Object(o["f"])("circle",{cx:"400",cy:"416",r:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),u=Object(o["f"])("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M48 80h64l48 272h256"},null,-1),s=Object(o["f"])("path",{d:"M160 288h249.44a8 8 0 007.85-6.43l28.8-144a8 8 0 00-7.85-9.57H128",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),d={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},p=Object(o["f"])("title",null,"Cart",-1),f=Object(o["f"])("circle",{cx:"176",cy:"416",r:"32"},null,-1),b=Object(o["f"])("circle",{cx:"400",cy:"416",r:"32"},null,-1),v=Object(o["f"])("path",{d:"M456.8 120.78a23.92 23.92 0 00-18.56-8.78H133.89l-6.13-34.78A16 16 0 00112 64H48a16 16 0 000 32h50.58l45.66 258.78A16 16 0 00160 368h256a16 16 0 000-32H173.42l-5.64-32h241.66A24.07 24.07 0 00433 284.71l28.8-144a24 24 0 00-5-19.93z"},null,-1);function O(t,e,r,O,j,m){var h=Object(o["o"])("cards"),g=Object(o["o"])("cartPage");return Object(o["i"])(),Object(o["d"])(o["a"],null,[n,Object(o["f"])("div",{class:"cart",onClick:e[1]||(e[1]=function(){return O.toggleCartPage&&O.toggleCartPage.apply(O,arguments)})},[Object(o["s"])((Object(o["i"])(),Object(o["d"])("svg",c,[a,i,l,u,s],512)),[[o["q"],!O.isCartOpen]]),Object(o["s"])((Object(o["i"])(),Object(o["d"])("svg",d,[p,f,b,v],512)),[[o["q"],O.isCartOpen]]),Object(o["f"])("span",null,Object(o["p"])(O.cart.data.length),1)]),Object(o["f"])(h,{isTouchDevice:O.isTouchDevice,movies:O.movies,currentMovieCover:O.currentMovieCover,isCartOpen:O.isCartOpen,isArrowLeftVisible:O.isArrowLeftVisible,getCoverStyle:O.getCoverStyle,horizontalScroll:O.horizontalScroll,adjustCardsPos:O.adjustCardsPos,toggleLeftArrow:O.toggleLeftArrow,moveToTop:O.moveToTop,addToCart:O.addToCart,truncate:O.truncate,thousandFormat:O.thousandFormat},null,8,["isTouchDevice","movies","currentMovieCover","isCartOpen","isArrowLeftVisible","getCoverStyle","horizontalScroll","adjustCardsPos","toggleLeftArrow","moveToTop","addToCart","truncate","thousandFormat"]),Object(o["f"])(g,{isTouchDevice:O.isTouchDevice,isSmallSize:O.isSmallSize,cart:O.cart,isCartOpen:O.isCartOpen,totalPrice:O.totalPrice,getCoverStyle:O.getCoverStyle,removeFromCart:O.removeFromCart,thousandFormat:O.thousandFormat},null,8,["isTouchDevice","isSmallSize","cart","isCartOpen","totalPrice","getCoverStyle","removeFromCart","thousandFormat"])],64)}r("13d5"),r("d81d"),r("b0c0"),r("5319"),r("ac1f"),r("7db0"),r("a434"),r("fb6a"),r("1276"),r("d3b7"),r("25f0"),r("a15b"),r("a4d3"),r("e01a");var j=Object(o["u"])("data-v-35db1ebd");Object(o["k"])("data-v-35db1ebd");var m={class:"card-left"},h={class:"card-right"},g={class:"name"},C={class:"genre"},y={class:"description"},S={class:"price"};Object(o["j"])();var w=j((function(t,e,r,n,c,a){return Object(o["i"])(),Object(o["d"])(o["a"],null,[Object(o["f"])("section",{class:"movie",onWheel:e[1]||(e[1]=Object(o["t"])((function(t){return n.props.horizontalScroll(t)}),["prevent"]))},[Object(o["f"])("section",{class:["cards",{cartOpen:n.props.isCartOpen}]},[(Object(o["i"])(!0),Object(o["d"])(o["a"],null,Object(o["n"])(n.props.movies.data,(function(t,e){return Object(o["i"])(),Object(o["d"])("article",{class:["card",{hoverInteraction:!n.props.isTouchDevice}],key:t.name},[Object(o["f"])("div",m,[Object(o["f"])("div",{class:"cover",style:n.props.getCoverStyle(t.cover)},null,4)]),Object(o["f"])("div",h,[Object(o["f"])("h2",g,Object(o["p"])(t.name),1),Object(o["f"])("h4",C,Object(o["p"])(t.genre),1),Object(o["f"])("p",y,Object(o["p"])(n.props.truncate(t.description,95)),1),Object(o["f"])("div",S,"$ "+Object(o["p"])(n.props.thousandFormat(t.price)),1),Object(o["f"])("button",{class:["add",{inCart:t.isInCart}],onClick:function(r){return n.props.addToCart(t,e,r)}},Object(o["p"])(t.isInCart?"已在購物車":"加入購物車"),11,["onClick"])])],2)})),128))],2)],32),Object(o["s"])(Object(o["f"])("div",{class:"moving-cover",style:n.props.getCoverStyle(r.currentMovieCover)},null,4),[[o["q"],n.props.currentMovieCover]]),Object(o["s"])(Object(o["f"])("button",{class:"arrow-left",onClick:e[2]||(e[2]=function(){var t;return n.props.moveToTop&&(t=n.props).moveToTop.apply(t,arguments)})}," ← ",512),[[o["q"],n.props.isArrowLeftVisible]])],64)})),T=r("5c40"),k={props:{isTouchDevice:{type:Boolean,default:!1},movies:{type:Object,default:function(){return[]}},currentMovieCover:{type:String,default:""},cardsEl:{type:Object,default:null},isCartOpen:{type:Boolean,default:!1},isArrowLeftVisible:{type:Boolean,default:!1},getCoverStyle:{type:Function,default:function(){}},horizontalScroll:{type:Function,default:function(){}},adjustCardsPos:{type:Function,default:function(){}},toggleLeftArrow:{type:Function,default:function(){}},moveToTop:{type:Function,default:function(){}},addToCart:{type:Function,default:function(){}},truncate:{type:Function,default:function(){}},thousandFormat:{type:Function,default:function(){}}},emits:[""],setup:function(t){return Object(T["p"])((function(){var t=document.querySelector(".cards");t.classList.add("demo"),setTimeout((function(){return t.classList.remove("demo")}),2500)})),{props:t}}};r("02a3");k.render=w,k.__scopeId="data-v-35db1ebd";var F=k,P=Object(o["u"])("data-v-1bf7666e");Object(o["k"])("data-v-1bf7666e");var A={key:0,class:"message"},x=Object(o["f"])("h2",null,"電影購物車",-1),z={class:"name"},B={class:"price"},L={key:0},M={key:1,class:"total-price"};Object(o["j"])();var q=P((function(t,e,r,n,c,a){return Object(o["i"])(),Object(o["d"])("section",{class:["cart-page",{cartOpen:n.props.isCartOpen}]},[n.props.cart.data.length?Object(o["e"])("",!0):(Object(o["i"])(),Object(o["d"])("h3",A," 你還沒將任何電影加入購物車喔 : ( ")),n.props.cart.data.length?(Object(o["i"])(),Object(o["d"])("section",{key:1,class:["panel",{hoverInteraction:!n.props.isTouchDevice}]},[x,Object(o["f"])("ul",null,[(Object(o["i"])(!0),Object(o["d"])(o["a"],null,Object(o["n"])(n.props.cart.data,(function(t,e){return Object(o["i"])(),Object(o["d"])("li",{key:t.name},[Object(o["f"])("div",{class:"remove",onClick:function(t){return n.props.removeFromCart(e)}},"✕",8,["onClick"]),Object(o["f"])("div",{class:"thumbnail",style:n.props.getCoverStyle(t.cover)},null,4),Object(o["f"])("h3",z,Object(o["p"])(t.name)+" "+Object(o["p"])(r.isSmallSize?"":"（".concat(t.genre.replaceAll("、"," / "),"）")),1),Object(o["f"])("h3",B,"$ "+Object(o["p"])(n.props.thousandFormat(t.price)),1)])})),128))]),n.props.cart.data.length?(Object(o["i"])(),Object(o["d"])("hr",L)):Object(o["e"])("",!0),n.props.cart.data.length?(Object(o["i"])(),Object(o["d"])("h2",M," 總計 $ "+Object(o["p"])(n.props.thousandFormat(n.total)),1)):Object(o["e"])("",!0)],2)):Object(o["e"])("",!0)],2)})),D=(r("a9e3"),r("a1e9")),I={props:{isTouchDevice:{type:Boolean,default:!1},isSmallSize:{type:Boolean,default:!1},cart:{type:Object,default:function(){return[]}},isCartOpen:{type:Boolean,default:!1},totalPrice:{type:Number,default:0},getCoverStyle:{type:Function,default:function(){}},removeFromCart:{type:Function,default:function(){}},thousandFormat:{type:Function,default:function(){}}},setup:function(t){var e=Object(D["j"])(t.totalPrice);function r(){var o=~~(.15*(t.totalPrice-e.value));if(0===o)return e.value=t.totalPrice;e.value+=o,window.requestAnimationFrame(r)}return Object(T["D"])((function(){return t.totalPrice}),r),{props:t,total:e}}};r("a506");I.render=q,I.__scopeId="data-v-1bf7666e";var _=I,V=r("bc3a"),R=r.n(V),H=r("cffa"),W=r("a5cf"),$={name:"App",components:{Cards:F,CartPage:_},setup:function(){var t=Object(o["m"])("ontouchstart"in document.documentElement),e=Object(o["m"])(document.body.getBoundingClientRect().width<768),r=Object(o["l"])({data:[]}),n=Object(o["l"])({data:[]}),c=Object(o["m"])(""),a=Object(o["m"])(!1),i=null,l=Object(o["m"])(!1),u=Object(o["m"])(!1),s=Object(o["m"])(!1),d=Object(o["b"])((function(){return n.data.map((function(t){return t.price})).reduce((function(t,e){return t+e}),0)}));function p(){for(var t in r.data)for(var e in n.data)r.data[t].name===n.data[e].name&&(r.data[t].isInCart=!0)}function f(t){return{"background-image":"url(".concat(t,")"),"background-position":"center center","background-size":"cover"}}function b(e){document.querySelector(".cards").classList.contains("demo")||t.value||(H["a"].to(".cards",{duration:.6,left:"+=".concat(1.5*e.deltaY,"px")}),O(),v())}function v(){var t=document.querySelector(".cards"),e=t.style.left.replace("px",""),r=document.querySelector(".card").getBoundingClientRect().width;e>0&&H["a"].to(".cards",{duration:.6,left:0}),e<-t.scrollWidth+2.5*r&&H["a"].to(".cards",{duration:.6,left:-t.scrollWidth+2.5*r})}function O(){if(a.value)return l.value=!1;var t=document.querySelector(".cards").style.left.replace("px","");return l.value=t<-800}function j(){H["a"].to(".cards",{duration:.6,left:0}),setTimeout((function(){return l.value=!1}),600)}function m(){i&&clearTimeout(i),a.value=!a.value,O(),h(1.6)}function h(t){n.data.length||(i=setTimeout((function(){a.value=!1,O()}),1e3*t))}function g(t,e,a){u.value||r.data[e].isInCart||(u.value=!0,c.value=t.cover,Object(o["g"])((function(){var o=a.target.closest(".card-right").previousSibling.querySelector(".cover");H["a"].from(".moving-cover",{duration:.8,left:o.getBoundingClientRect().left,top:o.getBoundingClientRect().top,width:.6*o.getBoundingClientRect().width,height:.6*o.getBoundingClientRect().height,opacity:1,ease:W["b"].easeOut}),setTimeout((function(){i&&clearTimeout(i),n.data.push(t),r.data[e].isInCart=!0,setTimeout((function(){return u.value=!1}),500)}),800)})))}function C(t){s.value||(s.value=!0,r.data.find((function(e){return e.name===n.data[t].name})).isInCart=!1,n.data.splice(t,1),setTimeout((function(){return s.value=!1}),300),h(1.6))}function y(t,e){return t.length>e?"".concat(t.slice(0,e-1),"..."):t}function S(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}return Object(o["r"])(n.data,(function(){H["a"].from(".cart",{duration:.3,scale:.8})})),Object(o["h"])((function(){t.value||document.querySelector("#app").classList.add("touch-device"),R.a.get("https://raw.githubusercontent.com/rayc2045/horizontal-scrolling-theater/master/src/assets/data/movie.json").then((function(t){r.data=t.data,p()})).catch((function(t){return console.log(t)}))})),{isTouchDevice:t,isSmallSize:e,movies:r,cart:n,currentMovieCover:c,isCartOpen:a,isArrowLeftVisible:l,isAddingToCart:u,totalPrice:d,getCoverStyle:f,horizontalScroll:b,adjustCardsPos:v,toggleLeftArrow:O,moveToTop:j,toggleCartPage:m,addToCart:g,removeFromCart:C,truncate:y,thousandFormat:S}}};r("3bb3");$.render=O;var E=$;Object(o["c"])(E).mount("#app")},9622:function(t,e,r){},a506:function(t,e,r){"use strict";r("5074")},d97a:function(t,e,r){}});
//# sourceMappingURL=app.953a0083.js.map